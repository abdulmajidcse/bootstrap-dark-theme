<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

    <style>
        /* dark theme style */
        html.dark .dark\:bg-dark {
            background-color: rgba(var(--bs-dark-rgb), var(--bs-bg-opacity)) !important;
        }

        html.dark .dark\:text-warning {
            color: rgba(var(--bs-warning-rgb), var(--bs-text-opacity)) !important;
        }
    </style>
</head>

<body>

    <div class="container">
        <h3>Bootstrap Dark Theme</h3>
        <select class="form-select my-3" id="theme" name="theme">
            <option value="light">Light</option>
            <option value="dark">Dark</option>
            <option value="system">System</option>
        </select>
        <h1 class="bg-primary bg-opacity-50 p-3 text-center text-light text-opacity-50 dark:bg-dark dark:text-warning">
            Hello, world!</h1>
    </div>

    <script>
        // set theme
        function setTheme() {
            if (localStorage.theme === 'dark' || (localStorage.theme == 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        }

        // when page load
        setTheme();

        // theme changing select tag
        let theme = document.querySelector('#theme');

        // selected theme opion which is active
        [...theme.children].forEach(option => option.value === localStorage.theme && option.setAttribute('selected', 'true'));

        // listen and update theme
        theme.addEventListener('change', function (e) {
            // set theme value in localStorage
            localStorage.setItem('theme', e.target.value);
            // update theme
            setTheme();
        });
    </script>
</body>

</html>